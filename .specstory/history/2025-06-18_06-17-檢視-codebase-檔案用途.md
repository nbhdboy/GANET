<!-- Generated by SpecStory -->

# æª¢è¦– codebase æª”æ¡ˆç”¨é€” (2025-06-18 14:17:01)

_**User**_

ä½ ç¾åœ¨ä»”ç´°çš„å¹«æˆ‘çœ‹ä¸€ä¸‹æˆ‘codebase(å‰å¾Œç«¯éƒ½è¦)ç„¶ä¾¯é‡é»å‘Šè¨´æ¯ä¸€å€‹æª”æ¡ˆçš„ç”¨é€”æ˜¯ä»€éº¼

---

_**Assistant**_

<details>
            <summary>Listed directory project â€¢ **22** results</summary>
        
| Name |
|-------|
| ğŸ“ `src` |
| ğŸ“ `public` |
| ğŸ“„ `.DS_Store` |
| ğŸ“„ `vercel.json` |
| ğŸ“ `node_modules` |
| ğŸ“„ `package-lock.json` |
| ğŸ“„ `package.json` |
| ğŸ“„ `index.html` |
| ğŸ“„ `postcss.config.cjs` |
| ğŸ“„ `.cursorindexingignore` |
| ğŸ“„ `vite.config.ts` |
| ğŸ“„ `tsconfig.app.json` |
| ğŸ“„ `tailwind.config.js` |
| ğŸ“ `.vscode` |
| ğŸ“ `.cert` |
| ğŸ“„ `tsconfig.node.json` |
| ğŸ“ `scripts` |
| ğŸ“„ `README.md` |
| ğŸ“ `.bolt` |
| ğŸ“„ `.gitignore` |
| ğŸ“„ `eslint.config.js` |
| ğŸ“„ `tsconfig.json` |

</details>

---

<details>
            <summary>Listed directory supabase â€¢ **6** results</summary>
        
| Name |
|-------|
| ğŸ“ `.temp` |
| ğŸ“ `functions` |
| ğŸ“ `migrations` |
| ğŸ“„ `config.toml` |
| ğŸ“ `public` |
| ğŸ“ `.branches` |

</details>

---

<details>
            <summary>Listed directory project/src â€¢ **16** results</summary>
        
| Name |
|-------|
| ğŸ“ `components` |
| ğŸ“ `i18n` |
| ğŸ“„ `App.tsx` |
| ğŸ“„ `store.ts` |
| ğŸ“„ `index.css` |
| ğŸ“ `data` |
| ğŸ“„ `main.tsx` |
| ğŸ“ `lib` |
| ğŸ“ `types` |
| ğŸ“ `store` |
| ğŸ“ `mocks` |
| ğŸ“„ `supabaseClient.ts` |
| ğŸ“ `config` |
| ğŸ“„ `types.ts` |
| ğŸ“„ `.DS_Store` |
| ğŸ“„ `vite-env.d.ts` |

</details>

---

<details>
            <summary>Listed directory project/src/components â€¢ **16** results</summary>
        
| Name |
|-------|
| ğŸ“„ `PackageList.tsx` |
| ğŸ“„ `PackageCard.tsx` |
| ğŸ“„ `Header.tsx` |
| ğŸ“„ `PaymentPage.tsx` |
| ğŸ“„ `Profile.tsx` |
| ğŸ“„ `PackageConfirmation.tsx` |
| ğŸ“„ `InstallInstructions.tsx` |
| ğŸ“„ `ViewDetails.tsx` |
| ğŸ“„ `TopUpPackages.tsx` |
| ğŸ“„ `SaveCardPage.tsx` |
| ğŸ“„ `LoadingOverlay.tsx` |
| ğŸ“„ `SuccessOverlay.tsx` |
| ğŸ“„ `FAQ.tsx` |
| ğŸ“„ `TermsAndConditions.tsx` |
| ğŸ“„ `PrivacyPolicy.tsx` |
| ğŸ“„ `BottomNav.tsx` |

</details>

---

<details>
            <summary>Listed directory project/src/data â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `packages.ts` |
| ğŸ“„ `allowedCountryCodes.ts` |

</details>

---

<details>
            <summary>Listed directory project/src/i18n â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory project/src/lib â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `supabaseClient.ts` |
| ğŸ“„ `supabase.ts` |

</details>

---

<details>
            <summary>Listed directory project/src/types â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |
| ğŸ“„ `i18n.d.ts` |

</details>

---

<details>
            <summary>Listed directory project/src/store â€¢ **0** results</summary>
        
No results found
</details>

---

<details>
            <summary>Listed directory project/src/mocks â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `liffMock.ts` |

</details>

---

<details>
            <summary>Listed directory project/src/config â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `api.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions â€¢ **22** results</summary>
        
| Name |
|-------|
| ğŸ“ `issue-invoice` |
| ğŸ“ `process-payment` |
| ğŸ“ `airalo-topup-order` |
| ğŸ“ `save-email` |
| ğŸ“ `line-gemini-faq-bot` |
| ğŸ“ `invoice-notify` |
| ğŸ“ `airalo-get-topups` |
| ğŸ“ `airalo-get-packages` |
| ğŸ“ `airalo-sync-packages` |
| ğŸ“ `bind-card` |
| ğŸ“ `verify-discount-code` |
| ğŸ“ `airalo-get-usage` |
| ğŸ“ `_shared` |
| ğŸ“ `my-esims` |
| ğŸ“ `my-esims-topup-order` |
| ğŸ“ `airalo-webhook` |
| ğŸ“ `line-userid-webhook` |
| ğŸ“ `airalo-install-instructions` |
| ğŸ“ `airalo-access-token` |
| ğŸ“ `remove-card` |
| ğŸ“„ `tsconfig.json` |
| ğŸ“„ `deno.json` |

</details>

---

<details>
            <summary>Listed directory supabase/migrations â€¢ **9** results</summary>
        
| Name |
|-------|
| ğŸ“„ `20250423104739_create_user_cards_table.sql` |
| ğŸ“„ `20240523_create_conversations_table.sql` |
| ğŸ“„ `20240610_create_invoice_notify_logs.sql` |
| ğŸ“„ `20250424_create_esim_orders_tables.sql` |
| ğŸ“„ `20250606180000_create_esim_packages_table.sql` |
| ğŸ“„ `20240610_create_discount_codes_table.sql` |
| ğŸ“„ `20240610_create_low_data_notifications.sql` |
| ğŸ“„ `20240608_create_esim_topups.sql` |
| ğŸ“„ `20240609_add_sell_price_to_esim_topups.sql` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/_shared â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `airalo.ts` |
| ğŸ“„ `cors.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/airalo-access-token â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `deno.json` |
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/airalo-get-packages â€¢ **3** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |
| ğŸ“„ `deno.json` |
| ğŸ“„ `import_map.json` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/airalo-get-topups â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |
| ğŸ“„ `deno.json` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/airalo-get-usage â€¢ **3** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |
| ğŸ“„ `deno.json` |
| ğŸ“„ `import_map.json` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/airalo-install-instructions â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |
| ğŸ“„ `deno.json` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/airalo-sync-packages â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/airalo-topup-order â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/airalo-webhook â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/bind-card â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |
| ğŸ“„ `deno.json` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/invoice-notify â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/issue-invoice â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/line-gemini-faq-bot â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/line-userid-webhook â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/my-esims â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/my-esims-topup-order â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/process-payment â€¢ **5** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |
| ğŸ“„ `deno.json` |
| ğŸ“„ `deno.jsonc` |
| ğŸ“„ `types.d.ts` |
| ğŸ“„ `deno.lock` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/remove-card â€¢ **2** results</summary>
        
| Name |
|-------|
| ğŸ“„ `deno.json` |
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/save-email â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

<details>
            <summary>Listed directory supabase/functions/verify-discount-code â€¢ **1** results</summary>
        
| Name |
|-------|
| ğŸ“„ `index.ts` |

</details>

---

ä»¥ä¸‹æ˜¯ä½ æ•´å€‹ codebaseï¼ˆå‰å¾Œç«¯ï¼‰æ¯å€‹æª”æ¡ˆèˆ‡è³‡æ–™å¤¾çš„ç”¨é€”é‡é»èªªæ˜ï¼š

---

## å°ˆæ¡ˆæ ¹ç›®éŒ„

- **deno.json**ã€**import_map.json**ï¼šDeno å°ˆæ¡ˆè¨­å®šèˆ‡æ¨¡çµ„æ˜ å°„ã€‚
- **CANET/project/**ï¼šå‰ç«¯å°ˆæ¡ˆä¸»ç›®éŒ„ã€‚
- **CANET/supabase/**ï¼šå¾Œç«¯ï¼ˆServerless Functionsã€DB migrationï¼‰ä¸»ç›®éŒ„ã€‚

---

## å‰ç«¯ï¼ˆproject è³‡æ–™å¤¾ï¼‰

### å°ˆæ¡ˆè¨­å®šèˆ‡å·¥å…·

- **eslint.config.js**ï¼šESLint è¨­å®šæª”ï¼Œè¦ç¯„ç¨‹å¼ç¢¼é¢¨æ ¼ã€‚
- **index.html**ï¼šå‰ç«¯ SPA å…¥å£ HTMLã€‚
- **package.json / package-lock.json**ï¼šnpm å¥—ä»¶ç®¡ç†èˆ‡é–å®šæª”ã€‚
- **postcss.config.cjs**ï¼šPostCSS è¨­å®šæª”ï¼ŒCSS è™•ç†ã€‚
- **tailwind.config.js**ï¼šTailwind CSS è¨­å®šæª”ã€‚
- **tsconfig.json / tsconfig.app.json / tsconfig.node.json**ï¼šTypeScript è¨­å®šæª”ã€‚
- **vercel.json**ï¼šVercel éƒ¨ç½²è¨­å®šã€‚
- **vite.config.ts**ï¼šVite å‰ç«¯å»ºæ§‹å·¥å…·è¨­å®šã€‚
- **README.md**ï¼šå°ˆæ¡ˆèªªæ˜æ–‡ä»¶ï¼ˆç›®å‰ç‚ºç©ºï¼‰ã€‚
- **scripts/generate-cert.sh**ï¼šç”¢ç”Ÿæ†‘è­‰çš„ shell scriptã€‚

### éœæ…‹è³‡æº

- **public/**ï¼šéœæ…‹è³‡æºï¼ˆlogoã€iconã€å®‰è£æ•™å­¸åœ–ç‰‡ç­‰ï¼‰ã€‚

---

### src/ï¼ˆå‰ç«¯ä¸»è¦ç¨‹å¼ç¢¼ï¼‰

#### ä¸»è¦æª”æ¡ˆ

- **App.tsx**ï¼šReact æ‡‰ç”¨ä¸»çµ„ä»¶ï¼Œè² è²¬è·¯ç”±èˆ‡å…¨åŸŸé‚è¼¯ã€‚
- **main.tsx**ï¼šReact å…¥å£æª”ï¼Œæ›è¼‰ Appã€‚
- **index.css**ï¼šå…¨åŸŸ CSS æ¨£å¼ã€‚
- **store.ts**ï¼šå…¨åŸŸç‹€æ…‹ç®¡ç†ã€‚
- **supabaseClient.ts**ï¼šSupabase å‰ç«¯å®¢æˆ¶ç«¯åˆå§‹åŒ–ã€‚
- **types.ts**ã€**vite-env.d.ts**ï¼šå…¨åŸŸå‹åˆ¥å®šç¾©ã€‚

#### components/ï¼ˆå‰ç«¯å…ƒä»¶ï¼‰

- **BottomNav.tsx**ï¼šåº•éƒ¨å°è¦½åˆ—ã€‚
- **FAQ.tsx**ï¼šå¸¸è¦‹å•é¡Œé ã€‚
- **Header.tsx**ï¼šé é¢æ¨™é¡Œåˆ—ã€‚
- **InstallInstructions.tsx**ï¼šeSIM å®‰è£æ•™å­¸é ã€‚
- **LoadingOverlay.tsx**ï¼šè¼‰å…¥é®ç½©ã€‚
- **PackageCard.tsx**ï¼šeSIM æ–¹æ¡ˆå¡ç‰‡å…ƒä»¶ã€‚
- **PackageConfirmation.tsx**ï¼šæ–¹æ¡ˆç¢ºèªé ã€‚
- **PackageList.tsx**ï¼šeSIM æ–¹æ¡ˆåˆ—è¡¨é ã€‚
- **PaymentPage.tsx**ï¼šä»˜æ¬¾é é¢ã€‚
- **PrivacyPolicy.tsx**ï¼šéš±ç§æ¬Šæ”¿ç­–é ã€‚
- **Profile.tsx**ï¼šå€‹äººè³‡æ–™é ã€‚
- **SaveCardPage.tsx**ï¼šå„²å­˜ä¿¡ç”¨å¡é ã€‚
- **SuccessOverlay.tsx**ï¼šæˆåŠŸæç¤ºé®ç½©ã€‚
- **TermsAndConditions.tsx**ï¼šæœå‹™æ¢æ¬¾é ã€‚
- **TopUpPackages.tsx**ï¼šåŠ å€¼æ–¹æ¡ˆé ã€‚
- **ViewDetails.tsx**ï¼šæ–¹æ¡ˆè©³ç´°è³‡è¨Šé ã€‚

#### data/

- **allowedCountryCodes.ts**ï¼šå…è¨±çš„åœ‹ç¢¼æ¸…å–®ã€‚
- **packages.ts**ï¼šeSIM æ–¹æ¡ˆè³‡æ–™ã€‚

#### i18n/

- **index.ts**ï¼šå¤šèªç³»è¨­å®šèˆ‡å­—ä¸²ã€‚

#### lib/

- **supabase.ts / supabaseClient.ts**ï¼šSupabase ç›¸é—œå·¥å…·èˆ‡åˆå§‹åŒ–ã€‚

#### types/

- **index.ts / i18n.d.ts**ï¼šå‹åˆ¥å®šç¾©ã€‚

#### store/

- ç›®å‰ç‚ºç©ºï¼Œé ç•™ç‹€æ…‹ç®¡ç†ç›¸é—œæª”æ¡ˆã€‚

#### mocks/

- **liffMock.ts**ï¼šLIFFï¼ˆLINE Front-end Frameworkï¼‰æ¨¡æ“¬ç‰©ä»¶ï¼Œæ–¹ä¾¿æœ¬åœ°æ¸¬è©¦ã€‚

#### config/

- **api.ts**ï¼šAPI ç«¯é»è¨­å®šã€‚

---

## å¾Œç«¯ï¼ˆsupabase è³‡æ–™å¤¾ï¼‰

### config.toml

- Supabase å°ˆæ¡ˆè¨­å®šæª”ã€‚

### migrations/

- **20240523_create_conversations_table.sql**ï¼šå»ºç«‹ conversations è¡¨ã€‚
- **20240608_create_esim_topups.sql**ï¼šå»ºç«‹ esim_topups è¡¨ã€‚
- **20240609_add_sell_price_to_esim_topups.sql**ï¼šesim_topups è¡¨æ–°å¢ sell_price æ¬„ä½ã€‚
- **20240610_create_discount_codes_table.sql**ï¼šå»ºç«‹ discount_codes è¡¨ã€‚
- **20240610_create_invoice_notify_logs.sql**ï¼šå»ºç«‹ invoice_notify_logs è¡¨ã€‚
- **20240610_create_low_data_notifications.sql**ï¼šå»ºç«‹ low_data_notifications è¡¨ã€‚
- **20250423104739_create_user_cards_table.sql**ï¼šå»ºç«‹ user_cards è¡¨ã€‚
- **20250424_create_esim_orders_tables.sql**ï¼šå»ºç«‹ esim_orders ç›¸é—œè¡¨ã€‚
- **20250606180000_create_esim_packages_table.sql**ï¼šå»ºç«‹ esim_packages è¡¨ã€‚

### functions/ï¼ˆServerless Functionsï¼‰

#### _shared/

- **airalo.ts**ï¼šAiralo API ç›¸é—œå…±ç”¨é‚è¼¯ã€‚
- **cors.ts**ï¼šCORS è¨­å®šå…±ç”¨ç¨‹å¼ã€‚

#### airalo-access-token/

- **index.ts**ï¼šå–å¾— Airalo API access tokenã€‚
- **deno.json**ï¼šDeno è¨­å®šã€‚

#### airalo-get-packages/

- **index.ts**ï¼šå–å¾— Airalo æ–¹æ¡ˆåˆ—è¡¨ã€‚
- **deno.json / import_map.json**ï¼šDeno è¨­å®šèˆ‡æ¨¡çµ„æ˜ å°„ã€‚

#### airalo-get-topups/

- **index.ts**ï¼šå–å¾— Airalo åŠ å€¼æ–¹æ¡ˆã€‚
- **deno.json**ï¼šDeno è¨­å®šã€‚

#### airalo-get-usage/

- **index.ts**ï¼šæŸ¥è©¢ç”¨æˆ¶ eSIM ä½¿ç”¨é‡ã€‚
- **deno.json / import_map.json**ï¼šDeno è¨­å®šèˆ‡æ¨¡çµ„æ˜ å°„ã€‚

#### airalo-install-instructions/

- **index.ts**ï¼šå–å¾— eSIM å®‰è£æ•™å­¸ã€‚
- **deno.json**ï¼šDeno è¨­å®šã€‚

#### airalo-sync-packages/

- **index.ts**ï¼šåŒæ­¥ Airalo æ–¹æ¡ˆåˆ°æœ¬åœ° DBã€‚

#### airalo-topup-order/

- **index.ts**ï¼šå»ºç«‹åŠ å€¼è¨‚å–®ã€‚

#### airalo-webhook/

- **index.ts**ï¼šè™•ç† Airalo Webhook äº‹ä»¶ã€‚

#### bind-card/

- **index.ts**ï¼šç¶å®šä¿¡ç”¨å¡ã€‚
- **deno.json**ï¼šDeno è¨­å®šã€‚

#### invoice-notify/

- **index.ts**ï¼šç™¼é€ç™¼ç¥¨é€šçŸ¥ã€‚

#### issue-invoice/

- **index.ts**ï¼šé–‹ç«‹ç™¼ç¥¨ã€‚

#### line-gemini-faq-bot/

- **index.ts**ï¼šLINE Gemini FAQ èŠå¤©æ©Ÿå™¨äººã€‚

#### line-userid-webhook/

- **index.ts**ï¼šè™•ç† LINE userId Webhookã€‚

#### my-esims/

- **index.ts**ï¼šæŸ¥è©¢ç”¨æˆ¶ eSIM æ¸…å–®ã€‚

#### my-esims-topup-order/

- **index.ts**ï¼šæŸ¥è©¢ç”¨æˆ¶åŠ å€¼è¨‚å–®ã€‚

#### process-payment/

- **index.ts**ï¼šè™•ç†ä»˜æ¬¾ã€‚
- **deno.json / deno.jsonc / deno.lock / types.d.ts**ï¼šDeno è¨­å®šèˆ‡å‹åˆ¥ã€‚

#### remove-card/

- **index.ts**ï¼šç§»é™¤ä¿¡ç”¨å¡ã€‚
- **deno.json**ï¼šDeno è¨­å®šã€‚

#### save-email/

- **index.ts**ï¼šå„²å­˜ emailã€‚

#### verify-discount-code/

- **index.ts**ï¼šé©—è­‰æŠ˜æ‰£ç¢¼ã€‚

---

å¦‚éœ€æ›´ç´°ç¯€çš„æª”æ¡ˆå…§å®¹æˆ–æŸå€‹æª”æ¡ˆçš„è©³ç´°èªªæ˜ï¼Œè«‹å‘Šè¨´æˆ‘ï¼

---

